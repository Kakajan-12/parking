import{e as p,an as d,c as N,Q as b,ao as o,L as g,u,j as e,B as h,ap as v,D as T,E as w,J as y,T as m,y as r,P,N as S,H as D,A as C,C as l}from"./index-DTDkP3dS.js";import{d as x}from"./date-formatter-DO6EIGl4.js";import{T as M,D as q}from"./DeletePopover-CP9XVYFj.js";import{P as F}from"./pagination-BmPWLSst.js";import{N as H}from"./Navbar-BhOrUXtn.js";const Q=()=>p({mutationFn:t=>d.deleteTarif(t)}),j=t=>N({queryKey:["tarif","list",t],queryFn:()=>d.getTarifList(t),placeholderData:b}),R=()=>{const{getPage:t}=o(),{changeModal:s}=g(),{t:n}=u(),{data:a}=j({page:t(),limit:10});return e.jsxs("div",{className:"flex w-full justify-end items-center gap-10",children:[e.jsxs("h3",{className:"text-lg font-bold ",children:[n("total-sum"),": ",`${a==null?void 0:a.total_price} TMT`]}),e.jsx(h,{className:"flex self-end",onClick:()=>s(e.jsx(v,{})),children:n("add-tariff")})]})},B=()=>{const{getPage:t}=o(),{data:s}=j({page:t(),limit:10});if(!s)return e.jsx("div",{children:"No data"});const{data:n,...a}=s;return e.jsxs("div",{className:"border rounded-2xl gap-2 flex overflow-hidden flex-col flex-1",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs(T,{className:"w-full overflow-auto h-full",children:[e.jsx(L,{}),e.jsx(w,{children:n.map((i,c)=>e.jsx(E,{item:i,index:t()*(c+1)},c))})]})}),e.jsx(F,{...a})]})},E=({index:t,item:s})=>{const[n,a]=y.useState(!1),{mutate:i}=Q(),{getPage:c}=o();return e.jsxs(m,{children:[e.jsx(r,{className:"text-center",children:t}),e.jsx(r,{className:"text-center truncate",children:s.name}),e.jsx(r,{className:"text-center",children:s.plate}),e.jsx(r,{className:"text-center",children:x(s.start_time)}),e.jsx(r,{className:"text-center",children:x(s.end_time)}),e.jsx(r,{className:"text-center",children:s.price}),e.jsx(r,{className:"flex justify-end gap-1",children:e.jsxs(P,{open:n,onOpenChange:f=>a(f),children:[e.jsx(S,{asChild:!0,children:e.jsx(h,{variant:"destructive",children:e.jsx(M,{})})}),e.jsx(q,{onCuncel:()=>a(!1),onDelete:()=>i(s.id,{onSuccess:()=>{D.invalidateQueries({queryKey:["tarif","list",{limit:10,page:c()}]})}})})]})})]})},L=()=>{const{t}=u();return e.jsx(C,{className:"bg-green-500 text-white",children:e.jsxs(m,{className:"text-white",children:[e.jsx(l,{className:"text-white text-center",children:t("no")}),e.jsx(l,{className:"text-white text-center",children:t("username")}),e.jsx(l,{className:"text-white text-center",children:t("carnumber")}),e.jsx(l,{className:"text-white text-center",children:t("starttime")}),e.jsx(l,{className:"text-white text-center",children:t("endtime")}),e.jsx(l,{className:"text-white text-center",children:t("payed")}),e.jsx(l,{className:"text-white text-center",children:t("actions")})]})})},I=()=>e.jsxs("div",{className:"w-full h-full p-6 flex flex-col gap-4",children:[e.jsx(H,{title:"Monthly Report"}),e.jsx(R,{}),e.jsx(B,{})]});export{I as default};
