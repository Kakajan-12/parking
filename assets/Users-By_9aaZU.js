import{e as U,aq as j,H as x,J as S,u,L as m,ar as b,j as e,T as f,y as r,S as T,p as P,q as C,r as D,s as q,t as h,P as M,N as Q,B as d,as as p,A as k,C as l,c as E,Q as H,D as A,E as B}from"./index-DTDkP3dS.js";import{u as F}from"./useQueryParam-CnjMrcY3.js";import{T as K,D as R}from"./DeletePopover-CP9XVYFj.js";import{S as G}from"./square-pen-D6wwvjQ9.js";import{P as I}from"./pagination-BmPWLSst.js";import{N as O}from"./Navbar-BhOrUXtn.js";const V=()=>U({mutationFn:s=>j.deleteUser(s),onSuccess:()=>{x.invalidateQueries({queryKey:["singleuser"]}),x.invalidateQueries({queryKey:["users"]})}}),J=({index:s,item:a})=>{const[c,t]=S.useState(!1),{t:n}=u(),{changeModal:i}=m(),{mutate:g}=b(),{mutate:v}=V(),N=()=>{i(e.jsx(p,{id:a.id}))},y=o=>{g({id:a.id,isActive:o=="true"})},w=()=>{v(a.id),t(!1)};return e.jsxs(f,{children:[e.jsx(r,{className:"font-medium text-center",children:s}),e.jsx(r,{className:"font-medium text-center",children:a.firstname}),e.jsx(r,{className:"text-center",children:a.lastname}),e.jsx(r,{className:"text-center",children:a.username}),e.jsx(r,{className:"flex justify-center",children:e.jsxs(T,{onValueChange:y,value:a.isActive?"true":"false",children:[e.jsx(P,{className:"bg-gray-100 w-40 outline-none ring-0",children:e.jsx(C,{placeholder:"Select"})}),e.jsx(D,{className:"outline-none",children:e.jsxs(q,{children:[e.jsx(h,{value:"true",children:n("active")}),e.jsx(h,{value:"false",children:n("inactive")})]})})]})}),e.jsx(r,{className:"text-center",children:a.role}),e.jsxs(r,{className:"flex justify-end gap-1",children:[e.jsxs(M,{open:c,onOpenChange:o=>t(o),children:[e.jsx(Q,{asChild:!0,children:e.jsx(d,{variant:"destructive",children:e.jsx(K,{})})}),e.jsx(R,{onCuncel:()=>t(!1),onDelete:w})]}),e.jsx(d,{onClick:N,children:e.jsx(G,{})})]})]})},L=()=>{const{t:s}=u();return e.jsx(k,{className:"bg-green-500 text-white sticky top-0",children:e.jsxs(f,{children:[e.jsx(l,{className:"text-white",children:s("no")}),e.jsx(l,{className:"text-white",children:s("firstname")}),e.jsx(l,{className:"text-white",children:s("surname")}),e.jsx(l,{className:"text-white",children:s("username")}),e.jsx(l,{className:"text-white",children:s("status")}),e.jsx(l,{className:"text-white",children:s("role")}),e.jsx(l,{className:"text-right text-white",children:s("actions")})]})})},z=s=>{const a=Object.entries(s).sort();return E({queryKey:["users",...a],queryFn:()=>j.getUsers(s),placeholderData:H})},W=()=>{const{getQuery:s}=F(),{data:a}=z({page:Number(s("page")??"1"),limit:10});if(!a)return;const{users:c,...t}=a;return e.jsxs("div",{className:"border rounded-2xl gap-2 flex overflow-hidden flex-col flex-1 relative",children:[e.jsxs(A,{className:"w-full overflow-auto h-full",children:[e.jsx(L,{}),e.jsx(B,{children:c.map((n,i)=>e.jsx(J,{index:(t.page-1)*t.limit+i+1,item:n},n.id))})]}),e.jsx(I,{...t})]})},X=()=>{const{changeModal:s}=m(),{t:a}=u();return e.jsx("div",{className:"w-full h-16 shadow-lg rounded-xl p-4 flex items-center justify-end gap-4",children:e.jsx(d,{onClick:()=>s(e.jsx(p,{})),children:a("create-user")})})},ae=()=>e.jsxs("div",{className:"w-full h-full p-6 flex flex-col gap-4",children:[e.jsx(O,{title:"Users"}),e.jsx(X,{}),e.jsx(W,{})]});export{ae as default};
