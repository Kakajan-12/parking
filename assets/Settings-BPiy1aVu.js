import{e as h,G as m,H as o,J as j,K as v,L as y,j as e,T as p,y as c,S as N,p as S,q as b,r as w,s as T,t as x,B as u,M as P,P as q,N as D,u as g,A as Q,C as i,n as K,c as I,D as M,E as G}from"./index-DTDkP3dS.js";import{u as H}from"./useQueryParam-CnjMrcY3.js";import{T as k,D as B}from"./DeletePopover-CP9XVYFj.js";import{S as E}from"./square-pen-D6wwvjQ9.js";import{P as F}from"./pagination-BmPWLSst.js";import{N as O}from"./Navbar-BhOrUXtn.js";const R=()=>h({mutationFn:a=>m.deleteCamera(a),onSuccess:()=>{o.invalidateQueries({queryKey:["cameras"]}),o.invalidateQueries({queryKey:["singlecamera"]})}}),z=({item:a,index:s})=>{const[n,t]=j.useState(!1),{mutate:r}=v(),{changeModal:l}=y(),{mutate:C}=R(),f=d=>{r({id:a.id,name:a.name,type:d})};return e.jsxs(p,{children:[e.jsx(c,{className:"font-medium text-center",children:s}),e.jsx(c,{className:"font-medium text-center",children:a.name}),e.jsx(c,{className:"",children:e.jsxs(N,{onValueChange:f,value:a.type,children:[e.jsx(S,{className:"bg-gray-100 w-40 outline-none ring-0",children:e.jsx(b,{placeholder:"Select"})}),e.jsx(w,{className:"outline-none",children:e.jsxs(T,{children:[e.jsx(x,{value:"inside",children:"Inside"}),e.jsx(x,{value:"outside",children:"Outside"})]})})]})}),e.jsxs(c,{className:"flex justify-end gap-2",children:[e.jsx(u,{onClick:()=>l(e.jsx(P,{id:a.id})),size:"sm",children:e.jsx(E,{})}),e.jsxs(q,{open:n,onOpenChange:d=>t(d),children:[e.jsx(D,{asChild:!0,children:e.jsx(u,{size:"sm",variant:"destructive",children:e.jsx(k,{})})}),e.jsx(B,{onCuncel:()=>t(!1),onDelete:()=>C(a.id)})]})]})]})},A=()=>{const{t:a}=g();return e.jsx(Q,{className:"bg-green-500 text-white sticky top-0",children:e.jsxs(p,{children:[e.jsx(i,{className:"text-white text-center",children:a("no")}),e.jsx(i,{className:"text-white text-center",children:a("name")}),e.jsx(i,{className:"text-white text-center",children:a("type")}),e.jsx(i,{className:"text-white text-center",children:a("actions")})]})})},V=()=>h({mutationFn:a=>m.createCamera(a),onSuccess(){o.invalidateQueries({queryKey:["cameras"]}),o.invalidateQueries({queryKey:["singlecamera"]})}}),J=()=>{const[a,s]=j.useState(""),{mutate:n}=V(),{t}=g(),r=()=>{n(a),s("")};return e.jsxs("div",{className:"flex gap-5",children:[e.jsx(K,{value:a,onChange:l=>s(l.target.value),className:"w-72",placeholder:"Write camera title"}),e.jsx(u,{onClick:r,children:t("create")})]})},L=a=>{const s=Object.entries(a).sort();return I({queryKey:["cameras",...s],queryFn:()=>m.getGetCameras(a)})},U=()=>{const{getQuery:a}=H(),{data:s}=L({page:Number(a("page")??"1"),limit:10});if(!s)return;const{cameras:n,...t}=s;return console.log(t),e.jsxs("div",{className:"border rounded-2xl gap-2 flex overflow-hidden flex-col flex-1 relative",children:[e.jsxs(M,{className:"w-full overflow-auto relative mb-10",children:[e.jsx(A,{}),e.jsx(G,{children:n.map((r,l)=>e.jsx(z,{index:(t.page-1)*t.limit+l+1,item:r},r.id))})]}),e.jsx(F,{...t})]})},ee=()=>e.jsxs("div",{className:"w-full h-full p-6 flex flex-col gap-4",children:[e.jsx(O,{title:"Cameras"}),e.jsx(J,{}),e.jsx(U,{})]});export{ee as default};
